"use strict";(self.webpackChunknodebucket=self.webpackChunknodebucket||[]).push([[245],{2666:(S,c,s)=>{s.r(c),s.d(c,{SecurityModule:()=>C});var g=s(6814),i=s(95),a=s(2129),l=s(9862),t=s(4769);let p=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-security"]],decls:1,vars:0,template:function(n,r){1&n&&t._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2})}return e})();var d=s(459);let f=(()=>{class e{constructor(o){this.http=o}findEmployeeById(o){return this.http.get("/api/employees/"+o)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(l.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function h(e,u){if(1&e&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.errorMessage," ")}}function v(e,u){1&e&&(t.TgZ(0,"span"),t._uU(1,"Sign In"),t.qZA())}function b(e,u){1&e&&(t.TgZ(0,"div"),t._UZ(1,"span",17),t.qZA())}const y=[{path:"",component:p,children:[{path:"signin",component:(()=>{class e{constructor(o,n,r,m,I){this.route=o,this.router=n,this.cookieService=r,this.securityService=m,this.fb=I,this.isLoading=!1,this.signinForm=this.fb.group({empId:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])]}),this.sessionUser={},this.errorMessage=""}signin(){this.isLoading=!0,console.log("signinForm",this.signinForm.value);const o=this.signinForm.controls.empId.value;if(!o||isNaN(parseInt(o,10)))return this.errorMessage="The employee ID is invalid. Please enter a number.",void(this.isLoading=!1);this.securityService.findEmployeeById(o).subscribe({next:n=>{console.log("employee",n),this.sessionUser=n,this.cookieService.set("session_user",o,1),this.cookieService.set("session_name",`${n.firstName} ${n.lastName}`,1);const r=this.route.snapshot.queryParamMap.get("returnUrl")||"/";this.isLoading=!1,this.router.navigate([r])},error:n=>{this.isLoading=!1,this.errorMessage=n.error.message?n.error.message:n.message}})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(a.gz),t.Y36(a.F0),t.Y36(d.N),t.Y36(f),t.Y36(i.qu))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-signin"]],decls:25,vars:4,consts:[[1,"container-fluid","bg-dark",2,"min-height","900px"],[1,"signin-container"],[1,"row","justify-content-center"],[1,"col-lg-3","col-md-6","col-sm-6"],[1,"card","shadow"],[1,"card-title","text-center","border-bottom"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["for","empId",1,"form-label"],["type","text","id","empId","formControlName","empId",1,"form-control"],[1,"d-grid"],["type","submit",1,"btn"],[4,"ngIf"],["routerLink","/",1,"text-underline-hover"],["role","alert",1,"alert","alert-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Please sign in with a valid Employee ID below"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Upon successful login, you can then access 'My Tasks' page by clicking on the person icon from the menu in the upper left hand corner."),t.qZA(),t.TgZ(5,"div",1)(6,"div",2)(7,"div",3)(8,"div",4)(9,"div",5)(10,"h2"),t._uU(11,"Employee Sign In"),t.qZA()(),t.YNc(12,h,2,1,"div",6),t.TgZ(13,"div",7)(14,"form",8),t.NdJ("ngSubmit",function(){return r.signin(),r.signinForm.reset()}),t.TgZ(15,"div",9)(16,"label",10),t._uU(17,"Employee ID:"),t.qZA(),t._UZ(18,"input",11),t.qZA(),t.TgZ(19,"div",12)(20,"button",13),t.YNc(21,v,2,0,"span",14),t.YNc(22,b,2,0,"div",14),t.qZA()()()()(),t.TgZ(23,"a",15),t._uU(24,"Return"),t.qZA()()()()()),2&n&&(t.xp6(12),t.Q6J("ngIf",r.errorMessage),t.xp6(2),t.Q6J("formGroup",r.signinForm),t.xp6(7),t.Q6J("ngIf",!r.isLoading),t.xp6(1),t.Q6J("ngIf",r.isLoading))},dependencies:[g.O5,a.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:["h2[_ngcontent-%COMP%]{text-align:center;margin-top:-1%;margin-bottom:2%;color:#946b2d;padding-top:4%;font-size:1.7em;font-weight:700}p[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:1em}.container-fluid[_ngcontent-%COMP%]{background-image:url(/assets/ravenclaw-signin-page.jpeg);background-repeat:no-repeat;background-position:center center;background-color:#000}.signin-container[_ngcontent-%COMP%]{margin-top:10%}.btn[_ngcontent-%COMP%]{color:#000;background-color:#946b2d;border:2px solid white}.text-underline-hover[_ngcontent-%COMP%]{color:#fff}"]})}return e})(),title:"Nodebucket: Sign In"},{path:"**",component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-page-not-found"]],decls:15,vars:0,consts:[[1,"container",2,"min-height","950px","max-width","1800px"],[1,"row"],[1,"col-md-6"],["routerLink","/"],["src","./assets/404-page.jpeg","alt","Page 404 - Not Found - Image of book with light bulb",1,"img-fluid"],[1,"col-md-6","my-5"],["routerLink","/",1,"btn","btn-outline-light"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"figure")(4,"a",3),t._UZ(5,"img",4),t.qZA(),t.TgZ(6,"figcaption"),t._uU(7,"Image Source: Redbubble"),t.qZA()()(),t.TgZ(8,"div",5)(9,"h2"),t._uU(10,"Quoth the Raven"),t.qZA(),t.TgZ(11,"h1"),t._uU(12,"404!"),t.qZA(),t.TgZ(13,"a",6),t._uU(14,"Return Home"),t.qZA()()()())},dependencies:[a.rH],styles:[".container[_ngcontent-%COMP%]{background-color:#000;background-size:contain}.img-fluid[_ngcontent-%COMP%]{margin-top:30%;margin-left:55%}figcaption[_ngcontent-%COMP%]{text-align:center;margin-left:55%;color:#fff}h2[_ngcontent-%COMP%]{color:#ce3ea2;font-size:2.5em;font-weight:700;margin-top:31%}h1[_ngcontent-%COMP%]{color:#946b2d;font-size:6em;font-weight:700;margin-left:5.5%}.btn[_ngcontent-%COMP%]{margin-top:1%;margin-left:12%;color:#1ac6f5}"]})}return e})(),title:"Not Found"}]}];let Z=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(y),a.Bz]})}return e})(),C=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[g.ez,Z,a.Bz,i.u5,i.UX,l.JF]})}return e})()}}]);